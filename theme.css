/**--------------------**
*?
*? 1. Variables
*?   - Fonts
*?   - Implementation
*? 2. Themes
*?   - Dark
*?   - Light
*? 2. General UI
*?   - Workspace
*? 4. Markdown
*?   - Emphasis
*?   - Code
*?   - Links
*? 5. Cursor
*? 6. Extra Fixes
*?   - Callouts
*?   - Image Formatting 
*?   - Misc.
*?
 **--------------------**/

/**** Implementation ****/

body:is(.theme-dark, .theme-light) {

  /** Fonts **/

  --font-monospace: "Fira Code", "Source Code Pro", monospace;

  --checkbox-size: 1.325em;

  /** Backgrounds **/

  --background-modifier-border: var(--bg5);
  --background-embed: var(--bg1);
  --blockquote-background-color: var(--background-embed);

  --background-primary:       var(--bg0);
  --background-primary-alt:   var(--bg0);
  --background-secondary:     var(--bg0);
  --background-secondary-alt: var(--bg0);

  --text-normal:              var(--fg);
  --text-muted:               var(--color-base-70);
  --text-faint:               var(--grey1);
  --text-selection:           var(--bg-visual);

  --text-link:                var(--header-aqua);
  --text-link-hover:          var(--fg-aqua);
  --text-link-external:       var(--header-blue);
  --text-link-external-hover: var(--fg-blue);
  --text-accent:              var(--header-blue);
  --text-accent-hover:        var(--header-purple);

  --code-background: var(--bg-dim);
  --code-normal: var(--text-muted);
  --code-inline: var(--fg-blue);

  --table-border-color: var(--bg5);
  
  --interactive-before: var(--bg4);
  --interactive-hover: var(--fg-aqua);
  --interactive-accent: var(--header-aqua);
  --interactive-accent-hover: var(--header-blue);
  
  --text-highlight-bg: var(--bg-yellow);

  --h1-color: var(--header-red);
  --h2-color: var(--header-orange);
  --h3-color: var(--header-yellow);
  --h4-color: var(--header-green);
  --h5-color: var(--header-blue);
  --h6-color: var(--header-purple);

  --h1-size: 34px;
  --h2-size: 26px;
  --h3-size: 22px;
  --h4-size: 20px;
  --h5-size: 19px;
  --h6-size: 18px;

  --h1-weight: 500;
  --h2-weight: 500;
  --h3-weight: 500;
  --h4-weight: 500;
  --h6-weight: 500;
}



/**** Theme Colors ****/


/** Dark Theme **/
.theme-dark {
  --bg-dim:      #293136;
  --bg0:         #333C43;
  --bg1:         #3A464C;
  --bg2:         #434F55;
  --bg3:         #4D5960;
  --bg4:         #555F66;
  --bg5:         #5D6B66;
  
  --bg-visual:   #5C3F4F;
  --bg-red:      #59464C;
  --bg-green:    #48584E;
  --bg-blue:     #3F5865;
  --bg-yellow:   #55544A;
  
  --fg:          #D3C6AA;
  
  --fg-red:      #E67E80;
  --fg-orange:   #E69875;
  --fg-yellow:   #DBBC7F;
  --fg-green:    #A7C080;
  --fg-aqua:     #83C092;
  --fg-blue:     #7FBBB3;
  --fg-purple:   #D699B6;

  --header-red:       #da6362;
  --header-orange:    #d77f48;
  --header-yellow:    #bf983d;
  --header-green:     #899c40;
  --header-aqua:      #569d79;
  --header-blue:      #5a93a2;
  --header-purple:    #b87b9d;
  
  --grey0:       #7A8478;
  --grey1:       #859289;
  --grey2:       #9DA9A0;

  --statusline0: #A7C080;
  --statusline1: #D3C6AA;
  --statusline2: #E67E80;
}


/** Light Theme **/
.theme-light {}



/**** General UI ****/


/** Workspace **/


/* Title Bar */
.workspace-leaf .view-header {
  box-shadow: 0 0 8px -4px var(--divider-color); 
}

/* Title Text */
.view-header-title {
  font-weight: 600;
}

/* Gutters */
.markdown-source-view.mod-cm6 .cm-gutters {
  z-index: -1 !important;
  margin-inline-start: calc(0px - var(--file-folding-offset) - 12px); 
  pointer-events: none;
}
.markdown-source-view.mod-cm6 .cm-content {
  width: fit-content;
}
.markdown-preview-view {
  padding-block: var(--file-margins);
  padding-right: 10px;
}



/**** Markdown ****/


/** Emphasis **/


/* Bold */
.cm-s-obsidian .cm-strong,
strong {
  color: var(--fg-orange);
}

/* Italic/Emphasis */
.cm-em,
em {
  color: var(--fg-purple);
}



/** Code **/

code {}

/* Inline Code */
.cm-s-obsidian span.cm-inline-code:not(.cm-formatting):not(.cm-formatting + .cm-inline-code),
.markdown-preview-view code {
  font-size: 0.9em;
  background-color: var(--code-background) !important;
  padding: 0.1em 0.25em;
  border-radius: var(--radius-s)
}
.cm-s-obsidian span.cm-inline-code:not(.cm-formatting) {
  color: var(--code-inline);
}

/* Codeblock (no language specified) */
.markdown-preview-view pre code {
  color: inherit;
}
.cm-s-obsidian pre.HyperMD-codeblock {
  background-color: var(--code-background)
}


/** Links **/
.cm-s-obsidian span.cm-hmd-internal-link {
  color: var(--text-link);
}

/* Wiki Links */
a.internal-link {
  color: var(--text-link);
}
a.internal-link:hover {
  color: var(--text-link-hover)
}

/* Markdown Links */
a.external-link {
  color: var(--text-link-external);
}
  a.external-link:hover {
  color: var(--text-link-external-hover);
}

/* Unresolved Links */
.is-unresolved {
  --link-unresolved-decoration-style: wavy;
  text-decoration-thickness: 1px;
}

/** Bullet Lists **/

.cm-indent::before,
ul::before,
ol::before {
  opacity: 0.5;
  border-right: 2px solid var(--fg-blue) !important;
}

/*Checkbox List*/
ul > li.task-list-item .task-list-item-checkbox {
  margin-inline-start: calc(var(--checkbox-size) * -1.35);
}
input.task-list-item-checkbox {
  border-width: 1px;
}
input.task-list-item-checkbox:hover {
  border-color: var(--header-blue);
}
input.task-list-item-checkbox:checked
{
  background-color: var(--fg-blue);
  box-shadow: inset 0 0 0 1px var(--background-primary);
}

.checkbox-container {
    background-color: var(--interactive-before);
}
.checkbox-container:after {
    background-color: var(--interactive-accent);
}
.checkbox-container.is-enabled:after {
    background-color: var(--bg3);
}


/** Blockquotes **/

.markdown-preview-view blockquote {
  padding-block: 0.25em;
}


/** Tables **/

table {
  background-color: var(--bg1);
}

/* Table Headers */
table th {
  background-color: var(--bg-green) !important;
}


/** Tags **/
.cm-s-obsidian span.cm-hashtag,
a.tag{
  font-weight: 500;
}

/** Embeds **/
.markdown-preview-view .markdown-embed {
  background-color: var(--blockquote-background-color);
}
.internal-embed.is-loaded:not(.image-embed) {
  background-color: var(--blockquote-background-color);
}


/** Graph **/

.graph-view.color-circle,
.graph-view.color-fill-highlight {
  color: var(--text-muted);
}
.graph-view.color-arrow {
  color: var(--text-normal);
  opacity: 0.5;
}
.graph-view.color-line {
  color: var(--background-modifier-border);
}
.graph-view.color-fill-highlight,
.graph-view.color-line-highlight {
  color: var(--interactive-accent);
}
.graph-view.color-fill-unresolved {
  color: var(--text-muted);
  opacity: 0.4;
}



/****  Cursor ****/


.cm-cursorLayer .cm-cursor {}

/* animation of the blinking */
.cm-cursorLayer {
  /* deactivate built-in animation from CodeMirror */
  animation-name: none !important; /* important needed */
}

@keyframes phase-blink {
  15% { opacity: 1 }
  50% { opacity: 0 }
  85% { opacity: 1 }
}

.cm-cursorLayer .cm-cursor {
  animation-duration: 2200ms;
  animation-name: phase-blink;
}



/**** Extra Fixes ****/


/** Callouts **/

.callout[data-callout="math"] {
  --callout-color: 174, 213, 129; /* material color 300 */
  --callout-icon: lucide-sigma;
}
.callout[data-callout="math"] .callout-content {
padding: 0 !important;
}
.callout[data-callout="math"] .callout-content .math-block {
border: none
}
.callout[data-callout="graph"] {
  --callout-color: 255, 213, 79;
  --callout-icon: lucide-line-chart;
}
.callout[data-callout="image"] {
  --callout-color: 255, 255, 255;
  --callout-icon: lucide-image;
}
.callout[data-callout="image"] .callout-content {
padding: 0 !important;
}
.callout[data-callout="code"] {
  --callout-color: 200, 255, 200;
  --callout-icon: lucide-curly-braces;
}
.callout[data-callout="code"] .callout-content {
padding: 0 !important;
}
.callout[data-callout="code"] .callout-content > pre {
padding:.5em !important;
margin-block: 0;
background-color: var(--code-background);
}

/* Fix all the callouts to be better */
.callout {
  mix-blend-mode: normal !important;
  padding: 0;
  border: none;
  border-left: 0.125rem solid rgba(var(--callout-color), 0.7);
}
.callout-title {
  padding: .5em 1em;
  background-color: rgba(var(--callout-color), 0.1);
}
.callout-fold {
  margin-left: auto;
  cursor: pointer;
}
.callout-content {
  padding: .75em !important;
  background-color: #1e282cff;
}
.callout-content > * {
  margin: 0;
}
.callout-content > * + * {
  margin-top: .5em;
}

/** Misc. **/

:root {
  --list-indent: 18px;
}

/* Hide page scrollbar */
.view-content ::-webkit-scrollbar {
  display: none !important;
}

/* Fix Dataview markers */
.dataview.list-view-ul li {
  list-style-type: none;
}
.dataview.list-view-ul li::before {
  visibility: visible;
  position: absolute;
  content: '\200B';
  pointer-events: none;
  border-radius: var(--list-bullet-radius);
  width: var(--list-bullet-size);
  height: var(--list-bullet-size);
  border: var(--list-bullet-border);
  transform: translate(-.85em, .6em);
  background-color: var(--list-marker-color);
  transition: transform 0.15s, box-shadow 0.15s;
}
.table-view-table > tbody > tr:hover {
  background-color: #aaa1 !important;
}

/* Make math display better */
div.math-block {
  padding-block: .125em;
  border: 1px solid #fff2;
  border-radius: 5px
}
/* Make the weird span ones also work */
span.math-block > mjx-container {
  padding-block: 1rem;
  border: 1px solid #fff2;
  border-radius: 5px
}

/* Make MathJax text bigger */
.MJX-TEX {
  font-size: 110%;
}

/* Make print break hr elements */
hr.page-break {
  opacity: 0.5;
  height: 1.5rem;
  display: flex;
  border-top: 4px dotted;
  color: white;
  background-color: unset;
}
hr.page-break::before {
    content: 'Page Break';
  font-size: .75em;
    margin-inline: auto;
}
@media print {
  hr.page-break {
    visibility: hidden;
    page-break-after: always;
  }
}